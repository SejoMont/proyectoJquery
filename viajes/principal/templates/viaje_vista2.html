{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="es">
<!-- {% for p in paquetes %}<p>-</p><li>{{p.nombre}} - {{p.descripcion}} {{p.precio}}</li>{% endfor %} -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'viajes/css/estilos.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <title>Viajes Valegio</title>
</head>
<script>
    $(document).ready(function () {
        $('input[name="alojamiento"]').click(function () {
            $('input[name="alojamiento"]').not(this).prop('checked', false);
        });
        $('input[name="despIda"]').click(function () {
            $('input[name="despIda"]').not(this).prop('checked', false);
        });
        $('input[name="despVuelta"]').click(function () {
            $('input[name="despVuelta"]').not(this).prop('checked', false);
        });
    });
</script>

<body class="fondo">
    {% include 'includes/cabecera.html' %}
    <div class="contenedor">
        <form action="{% url 'guardarViaje' %}" method="get">
            {% csrf_token %}
            <div class="subContenedor shadow">
                <div class="contenedor-wrapper">
                    <h1>Alojamientos</h1>
                </div>
                <div class="contenedor-wrapper">
                    {% for a in alojamientos %}
                    <div class="contenedor2 shadow">
                        <div id="carouselExampleControls{{ a.id }}" class="col-4 carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
                                {% for foto in a.foto_set.all %}
                                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                    <img src="{{ foto.foto.url }}" alt="Foto">
                                </div>
                                {% endfor %}
                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleControls{{ a.id }}" role="button"
                                data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleControls{{ a.id }}" role="button"
                                data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                        <div class="col-8">
                            <h3>{{ a.nombre }} - {{ a.precio }}€ / noche</h3>
                            <div class="info-piso">
                                <span class="icoHuespedes"></span> {{ a.nhuespedes }} Huéspedes
                                <span class="icoCamas"></span> {{ a.nhabitaciones }} Habitaciones
                                <span class="icoBanos"></span> {{ a.nbanos }} Baños
                            </div>
                            <br>
                            <p>{{ a.descripcion }}</p>
                            {% with index=forloop.counter0|add:"-1" %}
                            <p>Precio total: {{ precio_total|index:index }}€</p>
                            {% endwith %}
                            <a href="{% url 'detalle_alojamiento' id=a.id %}">Ver detalles</a>
                        </div>
                        <div class="col-4 cbox">
                            <input type="checkbox" name="alojamiento" value="{{ a.id }}">
                        </div>
                    </div> <br>
                    {% endfor %}
                </div>
            </div>
            <br>
            <div class="subContenedor shadow">
                <div class="contenedor-wrapper">
                    <h1>Desplazamiento Ida</h1>
                </div>
                <div class="contenedor-wrapper">
                    {% for d in desplazamientosOrigen %}
                    <div class="contenedor2 shadow">
                        <div class="col-4 photo">
                            <img src="/media/{{ d.foto }}" alt="">
                        </div>
                        <div class="col-8">
                            <p>-{{ d.nombre }} a {{ d.destino }}</p>
                        </div>
                        <div class="col-4 cbox">
                            <input type="checkbox" name="despIda" value="{{ d.id }}">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <br>
            <div class="subContenedor shadow">
                <div class="contenedor-wrapper">
                    <h1>Desplazamiento Vuelta</h1>
                </div>
                <div class="contenedor-wrapper">
                    {% for d in desplazamientosDestino %}
                    <div class="contenedor2 shadow">
                        <div class="col-4 photo">
                            <img src="/media/{{ d.foto }}" alt="">
                        </div>
                        <div class="col-8">
                            <p>-{{ d.nombre }} a {{ d.destino }}</p>
                        </div>
                        <div class="col-4 cbox">
                            <input type="checkbox" name="despVuelta" value="{{ d.id }}">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <input type="hidden" name="nHuespedes" value="{{ nHuespedes }}">
            <input type="hidden" name="salida" value="{{ salida }}">
            <input type="hidden" name="llegada" value="{{ llegada }}">
            <div class="button-container">
                <button type="submit" class="my-button">Enviar</button>
            </div>
            <!-- Otros campos ocultos -->

        </form>
    </div>
</body>

</html>